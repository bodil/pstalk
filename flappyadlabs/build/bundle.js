!function(t){function n(e){if(r[e])return r[e].exports;var u=r[e]={exports:{},id:e,loaded:!1};return t[e].call(u.exports,u,u.exports,n),u.loaded=!0,u.exports}var r={};return n.m=t,n.c=r,n.p="build/",n(0)}([function(t,n,r){function e(t,n){var r=o.get(t,"doge"),e=i.tween("doge",500,i.decompose(r,r.get("transform")),i.decompose(r,o.transform(430,150,1,1,Math.PI/4)),i.Easing.Quadratic.In);return e=e.concat(i.tween(n,500,o.reset,o.transform(0,150),i.Easing.Bounce.Out,i.Interpolation.Bezier)),e.onEnd(function(){console.log("THAT'S ALL SHIBES!")}),e}var u=r(1),o=r(2),i=r(3),a=r(4),s=r(5),c=r(6),f=(r(7),r(8)),l=r(9),h=r(10),p=r(11),m=r(12),d=m.node;window.b=u;var g=document.getElementById("game"),v=d({id:"root",width:480,height:320,asset:"assets/background.png"},d({id:"floor",width:480,height:320,asset:"assets/floor.png"}),d({id:"dropzone",width:140,height:237,asset:null,transform:"340 0",components:l.dropTarget(l.Match.Contains,function(t){return a.state(t,e(t,"dogecoin"))})}),d({id:"doge",width:85,height:60,asset:"assets/doge-1.png",transform:"50 100",components:[f.draggable(),h.collidable(function(t,n){return{state:o.update(t,n,function(t){var n=o.removeComponent("collidable",t);return o.removeComponent("draggable",n)}),newStreams:[e(t,"sad-doge")],unsubscribe:["draggable:doge"]}})]}),d({id:"tubes",width:0,height:0,transform:"240 80 0.8 0.8"},d({id:"toptube",width:130,height:700,asset:"assets/toptube.png",transform:"0 -700",components:h.collidable()}),d({id:"bottube",width:130,height:700,asset:"assets/bottube.png",transform:"0 120",components:h.collidable()})),d({id:"dogecoin",width:128,height:128,asset:"assets/dogecoin.png",transform:"128 -270 2 2"}),d({id:"sad-doge",width:128,height:125,asset:"assets/sad-doge.png",transform:"128 -270 2 2"}));s.loadAssets(v,["assets/doge-1.png","assets/doge-2.png","assets/doge-3.png"]).take(1).onValue(function(t){var n={width:480,height:320},r={width:640,height:400},e=p.select(),u=p.createContext(n,r),o=e.createTarget(u.physical);g.appendChild(o);var a=e.createEventStream(u,o),s=i.animate("doge",500,["assets/doge-1.png","assets/doge-2.png","assets/doge-3.png","assets/doge-2.png"]),m=c.stream(v,[f.system,l.system,h.system],a.merge(s));e.render(o,u.baseTransform,t,m)})},function(t,n,r){var e;!function(t){function n(){var t=window.performance||{};return t.now=function(){return t.now||t.webkitNow||t.msNow||t.oNow||t.mozNow||function(){return(new Date).getTime()}}(),t.now()}var e=r(20);t.Error=e.Error,t.End=e.End,t.Next=e.Next,t.fromPromise=e.fromPromise,t.fromEventTarget=e.fromEventTarget,t.fromCallback=e.fromCallback,t.fromNodeCallback=e.fromNodeCallback,t.fromPoll=e.fromPoll,t.once=e.once,t.errorOnce=e.once,t.fromArray=e.fromArray,t.interval=e.interval,t.sequentially=e.sequentially,t.repeatedly=e.repeatedly,t.never=e.never,t.later=e.later,t.constant=e.constant,t.combineAsArray=e.combineAsArray,t.combineWith=e.combineWith,t.combineTemplate=e.combineTemplate,t.mergeAll=e.mergeAll,t.zipAsArray=e.zipAsArray,t.zipWith=e.zipWith,t.onValues,t.fromBinder=e.fromBinder,t.when=e.when,t.update=e.when,t.more=e.more,t.noMore=e.noMore,t.EventStream=e.EventStream,t.Property=e.Property,t.Bus=e.Bus,t.ticks=function(){var r,e;return window.requestAnimationFrame?(r=window.requestAnimationFrame,e=window.cancelAnimationFrame):window.mozRequestAnimationFrame?(r=window.mozRequestAnimationFrame,e=window.mozCancelAnimationFrame):window.webkitRequestAnimationFrame?(r=window.webkitRequestAnimationFrame,e=window.webkitCancelAnimationFrame):window.msRequestAnimationFrame?(r=window.msRequestAnimationFrame,e=window.msCancelAnimationFrame):window.oRequestAnimationFrame?(r=window.oRequestAnimationFrame,e=window.oCancelAnimationFrame):(r=function(t){window.setTimeout(function(){return t(n())},1e3/60)},e=window.clearTimeout),t.fromBinder(function(n){function u(e){n(new t.Next(e))!==t.noMore&&(o=r(u))}var o;return o=r(u),function(){e(o)}})}}(e||(e={})),t.exports=e},function(t,n,r){var e,u=r(13),o=r(14);!function(t){function n(t,n){var r,e;return r=t.get("translateX")+n.get("translateX")*t.get("scaleX"),e=t.get("translateY")+n.get("translateY")*t.get("scaleY"),u.obj({translateX:r,translateY:e,scaleX:t.get("scaleX")*n.get("scaleX"),scaleY:t.get("scaleY")*n.get("scaleY"),rotate:t.get("rotate")+n.get("rotate")})}function r(t){return u.obj({translateX:0-t.get("translateX"),translateY:0-t.get("translateY"),scaleX:1/t.get("scaleX"),scaleY:1/t.get("scaleY"),rotate:0-t.get("rotate")})}function e(t,n){return{x:t.get("translateX")+n.x*t.get("scaleX"),y:t.get("translateY")+n.y*t.get("scaleY")}}function i(t,n){return n.get("children").reduce(function(n,r){return n.concat(i(t,r))},u.arr([t(n)]))}function a(t,n){return n.get("components").firstMatch(function(n){return n.get("name")===t})}function s(t,n){return i(function(t){return t},n).filter(function(n){return null!==a(t,n)})}function c(t,n){var r,e,o,i,a;if(t.get("id")===n)return t;for(o=t.get("children")||u.arr(),r=0,e=o.count();e>r;r++)if(i=o.get(r),a=c(i,n))return a;return null}function f(t,n){return n.assoc("components",n.get("components").filter(function(n){return n.get("name")!==t}))}function l(t,n,r,e,i){return u.obj({translateX:o.or(t,0),translateY:o.or(n,0),scaleX:o.or(r,1),scaleY:o.or(e,1),rotate:o.or(i,0)})}function h(t,n,r,e,i,a){return u.obj({translateX:o.or(n,t.get("translateX")),translateY:o.or(r,t.get("translateY")),scaleX:o.or(e,t.get("scaleX")),scaleY:o.or(i,t.get("scaleY")),rotate:o.or(a,t.get("rotate"))})}function p(n,r,e,o,i,a,s){var c=u.obj({id:n,width:r,height:e,asset:o,transform:i||t.reset,components:u.arr(a||[])});return m(c,s)}function m(t,n){var r=t.get("children")||u.arr(),e=u.arr(n).map(function(n){return n.assoc("parent",t.get("id"))});return t.assoc("children",r.concat(e))}function d(t,n,r){if(t.get("id")===n)return r(t);var e=t.get("children");return t.assoc("children",e.map(function(t){return d(t,n,r)}))}function g(t,r){var e=t.get("parent"),u=t.get("transform"),o=e?c(r,e):null;return o||"root"===t.get("id")||console.error("missing parent on",t.get("id"),e),o?n(g(o,r),u):u}function v(t,n,r){r=r||g(t,n);var e=r.get("translateX"),u=r.get("translateY");return{x1:e,y1:u,x2:e+t.get("width")*r.get("scaleX"),y2:u+t.get("height")*r.get("scaleY")}}function y(t,n,r){return t.x1<=n&&t.y1<=r&&n<=t.x2&&r<=t.y2}function b(t,n){return!(n.x1>t.x2||n.x2<t.x1||n.y1>t.y2||n.y2<t.y1)}function w(t,n){return t.x1>=n.x1&&t.x2<=n.x2&&t.y1>=n.y1&&t.y2<=n.y2}function E(t,n,r,e){return y(v(n,t),r,e)}function x(t,r,e,u){function o(u,i){var a,s,c,f=v(u,t,i);for(s=u.get("children"),a=s.length-1;a>=0;a--)if(c=s.get(a),c=o(c,n(i,c.get("transform"))))return c;return y(f,r,e)?u:null}return o(t,u||t.get("transform"))}function I(t,n,r){return b(v(t,r),v(n,r))}function k(t,n,r){return w(v(t,r),v(n,r))}function M(t,r){var e=n(r,t.get("transform"));return t.assoc("children",t.get("children").map(function(t){return M(t,e)}))}t.reset=u.obj({translateX:0,translateY:0,scaleX:1,scaleY:1,rotate:0}),t.compose=n,t.reverseTransform=r,t.transformPoint=e,t.flatMap=i,t.component=a,t.components=s,t.get=c,t.removeComponent=f,t.transform=l,t.copyTransform=h,t.node=p,t.add=m,t.update=d,t.absoluteTransform=g,t.pointInNode=E,t.nodeAtPoint=x,t.intersects=I,t.contains=k,t.decorateGraph=M}(e||(e={})),t.exports=e},function(t,n,r){var e,u=r(1),o=r(13),i=r(2);!function(t){function n(t,r){var e,u,o,a,s,c;if(t.get("id")===r.id)return r.transform&&(c=t.get("resetTransform"),c||(c=t.get("transform"),t=t.assoc("resetTransform",c)),t=t.assoc("transform",i.compose(c,r.transform))),void 0!==r.asset&&(t=t.assoc("asset",r.asset)),t;for(u=t.get("children"),o=0,a=u.length;a>o;o++)if(e=u.get(o),s=n(e,r))return t.assoc("children",u.assoc(o,s));return null}function e(t,n){var r=t.get("resetTransform")||t.get("transform");return o.obj({translateX:n.get("translateX")-r.get("translateX"),translateY:n.get("translateY")-r.get("translateY"),scaleX:n.get("scaleX")/r.get("scaleX"),scaleY:n.get("scaleY")/r.get("scaleY"),rotate:n.get("rotate")-r.get("rotate")})}function a(t,n){return u.once({type:"effect",id:t,asset:n})}function s(t,n,r,e,o,i){var a=!1,s=r.toJSON(),c=new h(s);return c.to(e.toJSON(),n),o&&c.easing(o),i&&c.interpolation(i),c.onComplete(function(){a=!0}),u.fromBinder(function(n){var e=u.ticks();return e.take(1).onValue(function(t){return c.start(t)}),e.skip(1).onValue(function(e){return a?u.noMore:(c.update(e),n(new u.Next({type:"effect",id:t,transform:r.assoc(s)}))===u.noMore&&(a=!0),a?(n(new u.End),u.noMore):void 0)}),function(){a=!0}})}function c(t,n,r){return u.repeatedly(n,r).map(function(n){return{id:t,asset:n,type:"effect"}})}function f(t,n,r){return u.sequentially(n,r).map(function(n){return{id:t,asset:n,type:"effect"}})}function l(t,n,r,e){return c(t,r,e).takeUntil(u.later(n,"hai lol"))}var h=r(18).Tween;t.Easing=r(18).Easing,t.Interpolation=r(18).Interpolation,t.applyEffect=n,t.decompose=e,t.asset=a,t.tween=s,t.animate=c,t.animateOnce=f,t.animateUntil=l}(e||(e={})),t.exports=e},function(t,n,r){var e,u=r(2);!function(t){function n(t,n,r,e){return u.flatMap(function(t){return t},n).reduce(function(n,u){var o=u.get("id"),i=u.get("components");return t.reduce(function(t,n){if(i.some(function(t){return t.get("name")===n.name})){var u=n.system(o,t.state,r,e);return{state:u.state,newStreams:t.newStreams.concat(u.newStreams),unsubscribe:t.unsubscribe.concat(u.unsubscribe)}}return t},n)},{state:n,newStreams:[],unsubscribe:[]})}function r(t,n){var r=t(n.state);return{state:r.state,newStreams:n.newStreams.concat(r.newStreams),unsubscribe:n.unsubscribe.concat(r.unsubscribe)}}function e(t){for(var n=[],r=0;r<arguments.length-1;r++)n[r]=arguments[r+1];return{state:t,newStreams:n.filter(function(t){return!!t})||[],unsubscribe:[]}}t.run=n,t.add=r,t.state=e}(e||(e={})),t.exports=e},function(t,n,r){var e,u=r(1),o=r(13),i=r(2);!function(t){function n(t,n){return u.fromArray(i.flatMap(function(t){return t.get("asset")},t).mutable()).concat(u.fromArray(n||[])).filter(function(t){return!!t}).skipDuplicates().flatMap(function(t){var n=new u.Bus,r=document.createElement("img");return r.setAttribute("src",t),r.onload=function(){n.push([t,r]),n.end()},r.onerror=function(){n.error(new u.Error("Canvas renderer failed to load asset "+t)),n.end()},n}).reduce(o.obj(),function(t,n){return t.assoc(n[0],n[1])}).endOnError()}t.loadAssets=n}(e||(e={})),t.exports=e},function(t,n,r){var e,u=r(13),o=r(2),i=r(3),a=r(4),s=r(14),c=r(15);!function(t){function n(t,n,r){var e=u.arr(n);return c.machine(t,[r],function(t,n){if("effect"===n.type)return{state:i.applyEffect(t,n),newStreams:[]};if(!s.isNull(n.x)&&!s.isNull(n.y)&&null===n.target){var u=o.nodeAtPoint(t,n.x,n.y);n.target=u?u.get("id"):null}return a.run(e,t,n,r)})}t.stream=n}(e||(e={})),t.exports=e},function(t,n,r){var e,u=r(13),o=r(2),i=r(4);!function(t){function n(n){var r=u.obj({name:t.system.name});return n&&(r=r.assoc("fn",n)),r}t.system={name:"clickable",system:function(n,r,e){var u,a,s=e;return"mousedown"===e.type&&(u=o.get(r,n),o.pointInNode(r,u,s.x,s.y)&&(a=o.component(t.system.name,u).get("fn")))?a(r,n):i.state(r)}},t.clickable=n}(e||(e={})),t.exports=e},function(t,n,r){var e,u=r(13),o=r(2),i=r(4);!function(t){function n(t,n,r){var e=n.x,u=n.y,i=t.get("id"),a=t.get("transform"),s=t.get("resetTransform")||a,c=a.get("translateX")-s.get("translateX"),f=a.get("translateY")-s.get("translateY"),l=r.takeWhile(function(t){return"mouseup"!==t.type}).filter(function(t){return"mousemove"===t.type}).map(function(t){return{type:"effect",id:i,transform:o.transform(c+(t.x-e),f+(t.y-u))}}),h=r.filter(function(t){return"mouseup"===t.type}).take(1).map(function(t){return{type:"draggabledropped",id:i,x:t.x,y:t.y}});return l.merge(h).name("draggable:"+i)}function r(n){var r=u.obj({name:t.system.name});return n&&(r=r.assoc("fn",n)),r}t.system={name:"draggable",system:function(r,e,u,a){var s,c,f,l=u,h=u;if("draggabledropped"===u.type&&h.id===r){var p;return s=o.get(e,r),c=o.components("dropTarget",e).filter(function(t){return o.component("dropTarget",t).get("match")(s,t,e)}),p=c.reduce(function(t,n){var e=o.component("dropTarget",n);return i.add(function(t){return e.get("fn")(t,r,n.get("id"))},t)},i.state(e)),f=o.component(t.system.name,s).get("fn"),f?i.add(function(t){return f(t,r,c.map(function(t){return t.get("id")}))},p):p}return i.state(e,"mousedown"===u.type&&l.target&&l.target===r?n(o.get(e,r),l,a):null)}},t.draggable=r}(e||(e={})),t.exports=e},function(t,n,r){var e,u=r(13),o=r(2),i=r(4);!function(t){function n(n,r){var e=0===n?o.intersects:1===n?o.contains:null;if(!e)throw new Error("Unknown match type "+n+" in dropTarget constructor.");return u.obj({name:t.system.name,fn:r,match:e})}!function(t){t[t.Intersects=0]="Intersects",t[t.Contains=1]="Contains"}(t.Match||(t.Match={}));t.Match;t.system={name:"dropTarget",system:function(t,n){return i.state(n)}},t.dropTarget=n}(e||(e={})),t.exports=e},function(t,n,r){var e,u=r(13),o=r(2),i=r(4);!function(t){function n(n){var r=u.obj({name:t.system.name});return n&&(r=r.assoc("fn",n)),r}t.system={name:"collidable",system:function(n,r){var e,u=o.get(r,n),a=o.components(t.system.name,r).filter(function(t){return t.get("id")!==n&&o.intersects(u,t,r)});return a.count()>0&&(e=o.component(t.system.name,u).get("fn"))?e(r,n,a.map(function(t){return t.get("id")})):i.state(r)}},t.collidable=n}(e||(e={})),t.exports=e},function(t,n,r){var e,u=r(13),o=r(16),i=r(17),a=r(2);!function(t){function n(){return u.arr([o.renderer,i.renderer]).filter(function(t){return t.supported()}).get(0)}function r(t,n){var r,e,u=t.width/t.height,o=n.width,i=n.width/u;return i>n.height&&(i=n.height,o=n.height*u),e=o/t.width,r={canvas:t,target:n,physical:{width:o,height:i},baseTransform:a.transform(0,0,e,e)}}t.select=n,t.createContext=r}(e||(e={})),t.exports=e},function(t,n,r){var e,u=r(2);!function(t){function n(t){for(var n=[],r=0;r<arguments.length-1;r++)n[r]=arguments[r+1];if(!t)throw new Error("In node builder: required arguments (id, width, height) missing.");if(void 0===t.id)throw new Error("In node builder: required argument `id` missing.");if(void 0===t.width)throw new Error("In node builder: required argument `width` missing for ID "+t.id);if(void 0===t.height)throw new Error("In node builder: required argument `height` missing for ID "+t.id);return"string"==typeof t.width&&(t.width=parseInt(t.width,10)),"string"==typeof t.height&&(t.height=parseInt(t.height,10)),"string"==typeof t.transform&&(t.transform=t.transform.split(/ +/).map(parseFloat)),t.transform instanceof Array&&(t.transform=u.transform.apply(null,t.transform)),!t.components||t.components instanceof Array||(t.components=[t.components]),u.node(t.id,t.width,t.height,t.asset,t.transform,t.components,n)}t.node=n}(e||(e={})),t.exports=e},function(t,n,r){function e(t,n){return this.has(t)?this:this.assoc(t,n)}function u(t){return t.reduce(function(t,n){return t.push(n)},this)}function o(t){for(var n,r=0,e=this.count();e>r;r++)if(n=this.get(r),t(n))return n;return null}function i(){return this.reduce(function(t){return t+1},0)}var a;!function(t){var n=r(21);n.object.prototype.count=i,n.array.prototype.count=function(){return this.length},n.object.prototype.assocIfNull=e,n.array.prototype.concat=u,n.array.prototype.firstMatch=o,t.obj=n.object,t.object=n.object,t.arr=n.array,t.array=n.array,t.isImmutableCollection=n.isImmutableCollection}(a||(a={})),t.exports=a},function(t){var n;!function(t){function n(t){return null===t||void 0===t}function r(t,r){return n(t)?r:t}t.isNull=n,t.or=r}(n||(n={})),t.exports=n},function(t,n,r){var e,u=r(1);!function(t){function n(t,n,r){return u.fromBinder(function(e){function o(t){var n=t.subscribe(function(n){return c?void(n.isNext()?a(n.value()):n.isError()?e(n):n.isEnd()&&(f=f.filter(function(n){return n.stream!==t}))):u.noMore});f.push({stream:t,name:t.toString(),unsub:n})}function i(t){f.filter(function(n){return t===n.name}).forEach(function(t){t.unsub()}),f=f.filter(function(n){return t!==n.name})}function a(t){var n=r(s,t);s=n.state,e(new u.Next(n.state)),n.newStreams&&n.newStreams.forEach(o),n.unsubscribe&&n.unsubscribe.forEach(i)}var s=t,c=!0,f=[];return n.forEach(o),function(){c=!1}}).toProperty(t)}t.machine=n}(e||(e={})),t.exports=e},function(t,n,r){var e,u=r(1),o=r(2),i=r(19);!function(t){function n(t,n){t.translate(n.get("translateX"),n.get("translateY")),t.scale(n.get("scaleX"),n.get("scaleY")),t.rotate(n.get("rotate"))}function r(t,e,u,i){var a,s=e.get("asset");t.save(),a=o.compose(u,e.get("transform")),n(t,a),s&&t.drawImage(i.get(s),0,0),t.restore(),e.get("children").forEach(function(n){return r(t,n,a,i)})}function e(t,n,e,o){var i=t.getContext("2d");o.sampledBy(u.ticks()).onValue(function(u){i.clearRect(0,0,t.width,t.height),r(i,u,n,e)})}function a(t,n){return i.mouseEventsFor(t,n).merge(i.keyEventsFor(window))}t.render=e,t.events=a,t.renderer={supported:function(){return!!document.createElement("canvas").getContext},createTarget:function(t){var n=document.createElement("canvas");return n.setAttribute("width",""+t.width+"px"),n.setAttribute("height",""+t.height+"px"),n},createEventStream:function(t,n){return a(t,n)},render:e}}(e||(e={})),t.exports=e},function(t,n,r){var e,u=r(1),o=r(13),i=r(2),a=r(19);!function(t){function n(){if("result"in arguments.callee)return arguments.callee.result;var t=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,n=document.body;for(var r in n.style)if(t.test(r))return arguments.callee.result=r.match(t)[0];return arguments.callee.result="WebkitOpacity"in n.style?"Webkit":"KhtmlOpacity"in n.style?"Khtml":""}function r(t){var r,e=arguments.callee.cache||{};if(e&&e[t])return e[t];var u=n();return r=u?u+t[0].toUpperCase()+t.slice(1):t,e[t]=r,arguments.callee.cache=e,r}function e(t){return["translate(",t.get("translateX"),"px, ",t.get("translateY"),"px) ","scale("+t.get("scaleX"),", ",t.get("scaleY"),") ","rotate(",t.get("rotate"),"rad)"].join("")}function s(t,n,u,a){var s=u.style.zIndex?parseInt(u.style.zIndex,10)+1:1;return i.flatMap(function(t){return t},a).filter(function(t){return!!t.get("asset")}).map(function(u,c){var f=i.compose(t,i.absoluteTransform(u,a)),l={};l[r("transform")]=e(f),l[r("transformOrigin")]="0px 0px",l.zIndex=""+(s+c);var h={id:u.get("id"),src:n.get(u.get("asset")).src,style:o.obj(l)};return o.obj(h)})}function c(t){for(var n=0,r=t.childNodes,e=r.length,u=[];e>n;n++)u.push(r.item(n));return o.array(u)}function f(t,n){return n.reduce(function(n,r){return n.assoc(t(r),r)},o.obj())}function l(t,n,r){return t.reduce(function(t,e){var u=r[e],o=n.get(e);return u!==o?t.assoc(e,o):t},o.obj())}function h(t,n){var r=l(w,t,n),e=l(E,t.get("style"),n.style);return r.count()||e.count()?(e.count()&&(r=r.assoc("style",e)),r=r.assoc("id",t.get("id"))):null}function p(t,n){var r=f(function(t){return t.get("id")},n),e=c(t),u=f(function(t){return t.getAttribute("data-id")},e),o=e.filter(function(t){return!r.has(t.getAttribute("data-id"))}),i=n.filter(function(t){return!u.has(t.get("id"))}),a=n.filter(function(t){return u.has(t.get("id"))}).map(function(t){return h(t,u.get(t.get("id")))}).filter(function(t){return!!t});return{elemsToRemove:o,nodesToCreate:i,nodeChanges:a}}function m(t){var n=document.createElement(t);return n.style.border="0",n.style.margin="0",n.style.padding="0",n.style.borderRadius="0",n}function d(t){var n=m("img");return n.setAttribute("data-id",t.get("id")),n.style.position="absolute",n}function g(t,n){var r;w.forEach(function(r){n.has(r)&&(t[r]=n.get(r))}),n.has("style")&&(r=n.get("style"),E.forEach(function(n){r.has(n)&&(t.style[n]=r.get(n))}))}function v(t,n){var r=f(function(t){return t.getAttribute("data-id")},c(t));n.elemsToRemove.forEach(function(t){return t.parentNode.removeChild(t)}),n.nodesToCreate.forEach(function(n){var r=d(n);g(r,n),t.appendChild(r)}),n.nodeChanges.forEach(function(t){g(r.get(t.get("id")),t)})}function y(t,n,r,e){var o=m("div");o.style.width=""+t.clientWidth+"px",o.style.height=""+t.clientHeight+"px",o.style.position="absolute",o.style.overflow="hidden",t.appendChild(o),e.sampledBy(u.ticks()).onValue(function(t){var e=s(n,r,o,t),u=p(o,e);v(o,u)})}function b(t,n){return a.mouseEventsFor(t,n).merge(a.keyEventsFor(window))}t.vendorPrefix=n,t.vp=r;var w=o.array(["src"]),E=o.array([r("transform"),r("transformOrigin"),"zIndex"]);t.render=y,t.events=b,t.renderer={supported:function(){var t=document.createElement("div");return o.arr(["transform","WebkitTransform","MozTransform","OTransform","msTransform"]).some(function(n){return void 0!==t.style[n]})},createTarget:function(t){var n=m("div");return n.style.width=""+t.width+"px",n.style.height=""+t.height+"px",n},createEventStream:function(t,n){return b(t,n)},render:y}}(e||(e={})),t.exports=e},function(t){void 0===Date.now&&(Date.now=function(){return(new Date).valueOf()});var n=n||function(){var t=[];return{REVISION:"12",getAll:function(){return t},removeAll:function(){t=[]},add:function(n){t.push(n)},remove:function(n){var r=t.indexOf(n);-1!==r&&t.splice(r,1)},update:function(n){if(0===t.length)return!1;var r=0;for(n=void 0!==n?n:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();r<t.length;)t[r].update(n)?r++:t.splice(r,1);return!0}}}();n.Tween=function(t){var r=t,e={},u={},o={},i=1e3,a=0,s=!1,c=!1,f=!1,l=0,h=null,p=n.Easing.Linear.None,m=n.Interpolation.Linear,d=[],g=null,v=!1,y=null,b=null;for(var w in t)e[w]=parseFloat(t[w],10);this.to=function(t,n){return void 0!==n&&(i=n),u=t,this},this.start=function(t){n.add(this),c=!0,v=!1,h=void 0!==t?t:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),h+=l;for(var i in u){if(u[i]instanceof Array){if(0===u[i].length)continue;u[i]=[r[i]].concat(u[i])}e[i]=r[i],e[i]instanceof Array==!1&&(e[i]*=1),o[i]=e[i]||0}return this},this.stop=function(){return c?(n.remove(this),c=!1,this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var t=0,n=d.length;n>t;t++)d[t].stop()},this.delay=function(t){return l=t,this},this.repeat=function(t){return a=t,this},this.yoyo=function(t){return s=t,this},this.easing=function(t){return p=t,this},this.interpolation=function(t){return m=t,this},this.chain=function(){return d=arguments,this},this.onStart=function(t){return g=t,this},this.onUpdate=function(t){return y=t,this},this.onComplete=function(t){return b=t,this},this.update=function(t){var n;if(h>t)return!0;v===!1&&(null!==g&&g.call(r),v=!0);var c=(t-h)/i;c=c>1?1:c;var w=p(c);for(n in u){var E=e[n]||0,x=u[n];x instanceof Array?r[n]=m(x,w):("string"==typeof x&&(x=E+parseFloat(x,10)),"number"==typeof x&&(r[n]=E+(x-E)*w))}if(null!==y&&y.call(r,w),1==c){if(a>0){isFinite(a)&&a--;for(n in o){if("string"==typeof u[n]&&(o[n]=o[n]+parseFloat(u[n],10)),s){var I=o[n];o[n]=u[n],u[n]=I,f=!f}e[n]=o[n]}return h=t+l,!0}null!==b&&b.call(r);for(var k=0,M=d.length;M>k;k++)d[k].start(t);return!1}return!0}},n.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var n,r=.1,e=.4;return 0===t?0:1===t?1:(!r||1>r?(r=1,n=e/4):n=e*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/e)))},Out:function(t){var n,r=.1,e=.4;return 0===t?0:1===t?1:(!r||1>r?(r=1,n=e/4):n=e*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin(2*(t-n)*Math.PI/e)+1)},InOut:function(t){var n,r=.1,e=.4;return 0===t?0:1===t?1:(!r||1>r?(r=1,n=e/4):n=e*Math.asin(1/r)/(2*Math.PI),(t*=2)<1?-.5*r*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/e):r*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-n)*Math.PI/e)*.5+1)}},Back:{In:function(t){var n=1.70158;return t*t*((n+1)*t-n)},Out:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},InOut:function(t){var n=2.5949095;return(t*=2)<1?.5*t*t*((n+1)*t-n):.5*((t-=2)*t*((n+1)*t+n)+2)}},Bounce:{In:function(t){return 1-n.Easing.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*n.Easing.Bounce.In(2*t):.5*n.Easing.Bounce.Out(2*t-1)+.5}}},n.Interpolation={Linear:function(t,r){var e=t.length-1,u=e*r,o=Math.floor(u),i=n.Interpolation.Utils.Linear;return 0>r?i(t[0],t[1],u):r>1?i(t[e],t[e-1],e-u):i(t[o],t[o+1>e?e:o+1],u-o)},Bezier:function(t,r){var e,u=0,o=t.length-1,i=Math.pow,a=n.Interpolation.Utils.Bernstein;for(e=0;o>=e;e++)u+=i(1-r,o-e)*i(r,e)*t[e]*a(o,e);return u},CatmullRom:function(t,r){var e=t.length-1,u=e*r,o=Math.floor(u),i=n.Interpolation.Utils.CatmullRom;return t[0]===t[e]?(0>r&&(o=Math.floor(u=e*(1+r))),i(t[(o-1+e)%e],t[o],t[(o+1)%e],t[(o+2)%e],u-o)):0>r?t[0]-(i(t[0],t[0],t[1],t[1],-u)-t[0]):r>1?t[e]-(i(t[e],t[e],t[e-1],t[e-1],u-e)-t[e]):i(t[o?o-1:0],t[o],t[o+1>e?e:o+1],t[o+2>e?e:o+2],u-o)},Utils:{Linear:function(t,n,r){return(n-t)*r+t},Bernstein:function(t,r){var e=n.Interpolation.Utils.Factorial;return e(t)/e(r)/e(t-r)},Factorial:function(){var t=[1];return function(n){var r,e=1;if(t[n])return t[n];for(r=n;r>1;r--)e*=r;return t[n]=e}}(),CatmullRom:function(t,n,r,e,u){var o=.5*(r-t),i=.5*(e-n),a=u*u,s=u*a;return(2*n-2*r+o+i)*s+(-3*n+3*r-2*o-i)*a+o*u+n}}},t.exports=n},function(t,n,r){var e,u=r(1),o=r(2);!function(t){function n(t){return{metaKey:t.metaKey,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey}}function r(t,n){return n.x>=0&&n.x<t.clientWidth&&n.y>=0&&n.y<t.clientHeight}function e(t){var n=0,r=0;if(t.offsetParent)do n+=t.offsetLeft,r+=t.offsetTop;while(t=t.offsetParent);return{x:n,y:r}}function i(t){var n,r;return t.pageX||t.pageY?(n=t.pageX,r=t.pageY):(t.clientX||t.clientY)&&(n=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,r=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:n,y:r}}function a(t,u,a){var s,c,f,l,p=e(u);if("touch"===a.type.slice(0,5)){var m,d=a,g=d.touches;if("touchstart"===d.type&&1!==g.length)return null;"touchend"===d.type&&(g=d.changedTouches),m=g.item(0),c=i(m),s={type:h[d.type],x:c.x-p.x,y:c.y-p.y,button:1,modifiers:n(d),target:null}}else c=i(a),s={type:a.type,x:c.x-p.x,y:c.y-p.y,button:a.button,modifiers:n(a),target:null};return r(u,s)&&a.preventDefault(),f=o.reverseTransform(t.baseTransform),l=o.transformPoint(f,s),s.x=l.x,s.y=l.y,s}function s(t){return{type:t.type,keycode:t.keyCode,modifiers:n(t)}}function c(t,n){return u.fromEventTarget(n,"mousedown").merge(u.fromEventTarget(window,"mouseup")).merge(u.fromEventTarget(window,"mousemove")).map(function(r){return a(t,n,r)}).filter(function(t){return!!t}).merge(f(t,n))}function f(t,n){return u.fromEventTarget(n,"touchstart").merge(u.fromEventTarget(window,"touchend")).merge(u.fromEventTarget(window,"touchmove")).map(function(r){return a(t,n,r)}).filter(function(t){return!!t})}function l(t){return u.fromEventTarget(t,"keydown").merge(u.fromEventTarget(t,"keyup")).map(s)}t.toKeyboardModifiers=n;var h={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"};t.toMouseEvent=a,t.toKeyboardEvent=s,t.mouseEventsFor=c,t.touchEventsFor=f,t.keyEventsFor=l}(e||(e={})),t.exports=e},function(t,n,r){var e,u;(function(t){(function(){var n,o,i,a,s,c,f,l,h,p,m,d,g,v,y,b,w,E,x,I,k,M,S,A,T,O,C,P,B,W,_,X,Y,q,N,j,F,z,V,D,H,L,U,R,K,Q,J,Z,$,G,tn,nn,rn,en,un,on,an,sn,cn,fn,ln,hn,pn,mn,dn=[].slice,gn={}.hasOwnProperty,vn=function(t,n){function r(){this.constructor=t}for(var e in n)gn.call(n,e)&&(t[e]=n[e]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},yn=function(t,n){return function(){return t.apply(n,arguments)}};n={toString:function(){return"Bacon"}},n.version="0.7.8",n.fromBinder=function(t,r){return null==r&&(r=pn.id),new p(_(n,"fromBinder",t,r),function(e){var u;return u=t(function(){var t,o,i,a,s,c;for(t=1<=arguments.length?dn.call(arguments,0):[],a=r.apply(null,t),z(a)&&pn.last(a)instanceof h||(a=[a]),i=n.more,s=0,c=a.length;c>s;s++)if(o=a[s],i=e(o=on(o)),i===n.noMore||o.isEnd())return null!=u?u():n.scheduler.setTimeout(function(){return u()},0),i;return i})})},n.$={asEventStream:function(t,r,e){var u;return D(r)&&(u=[r,null],e=u[0],r=u[1]),ln(this,"asEventStream",t,n.fromBinder(function(n){return function(e){return n.on(t,r,e),function(){return n.off(t,r,e)}}}(this),e))}},null!=(mn="undefined"!=typeof jQuery&&null!==jQuery?jQuery:"undefined"!=typeof Zepto&&null!==Zepto?Zepto:null)&&(mn.fn.asEventStream=n.$.asEventStream),n.fromEventTarget=function(t,r,e){var u,o,i,a,s,c;return u=null!=(i=t.addEventListener)?i:null!=(a=t.addListener)?a:t.bind,o=null!=(s=t.removeEventListener)?s:null!=(c=t.removeListener)?c:t.unbind,ln(n,"fromEventTarget",t,r,n.fromBinder(function(n){return u.call(t,r,n),function(){return o.call(t,r,n)}},e))},n.fromPromise=function(t,r){return ln(n,"fromPromise",t,n.fromBinder(function(n){return t.then(n,function(t){return n(new l(t))}),function(){return r&&"function"==typeof t.abort?t.abort():void 0}},function(t){return[t,X()]}))},n.noMore=["<no-more>"],n.more=["<more>"],n.later=function(t,r){return ln(n,"later",t,r,n.sequentially(t,[r]))},n.sequentially=function(t,r){var e;return e=0,ln(n,"sequentially",t,r,n.fromPoll(t,function(){var t;return t=r[e++],e<r.length?t:e===r.length?[t,X()]:X()}))},n.repeatedly=function(t,r){var e;return e=0,ln(n,"repeatedly",t,r,n.fromPoll(t,function(){return r[e++%r.length]}))},n.spy=function(t){return en.push(t)},en=[],rn=function(t){var n,r,e,u;if(en.length&&!rn.running)try{for(rn.running=!0,u=[],r=0,e=en.length;e>r;r++)n=en[r],u.push(n(t));return u}finally{delete rn.running}},hn=function(t){return function(){var n,r,e,u;return e=arguments[0],n=2<=arguments.length?dn.call(arguments,1):[],"object"==typeof e&&n.length&&(r=e,u=n[0],e=function(){return r[u].apply(r,arguments)},n=n.slice(1)),t.apply(null,[e].concat(dn.call(n)))}},U=function(t,r){return hn(function(){var e,u,o;return u=arguments[0],e=2<=arguments.length?dn.call(arguments,1):[],o=tn(r,[function(t,n){return u.apply(null,dn.call(t).concat([n]))}]),ln.apply(null,[n,t,u].concat(dn.call(e),[n.combineAsArray(e).flatMap(o)]))})},n.fromCallback=U("fromCallback",function(){var t,r;return r=arguments[0],t=2<=arguments.length?dn.call(arguments,1):[],n.fromBinder(function(n){return R(r,t)(n),G},function(t){return[t,X()]})}),n.fromNodeCallback=U("fromNodeCallback",function(){var t,r;return r=arguments[0],t=2<=arguments.length?dn.call(arguments,1):[],n.fromBinder(function(n){return R(r,t)(n),G},function(t,n){return t?[new l(t),X()]:[n,X()]})}),n.fromPoll=function(t,r){return ln(n,"fromPoll",t,r,n.fromBinder(function(r){var e;return e=n.scheduler.setInterval(r,t),function(){return n.scheduler.clearInterval(e)}},r))},n.interval=function(t,r){return null==r&&(r={}),ln(n,"interval",t,r,n.fromPoll(t,function(){return $(r)}))},n.constant=function(t){return new y(_(n,"constant",t),function(n){return n(F(t)),n(X()),G})},n.never=function(){return ln(n,"never",n.fromArray([]))},n.once=function(t){return ln(n,"once",t,n.fromArray([t]))},n.fromArray=function(t){return M(t),t=C(t),new p(_(n,"fromArray",t),function(r){var e,u;return u=!1,e=function(){var o,i;
return pn.empty(t)?r(X()):(i=t.splice(0,1)[0],o=r(on(i)),o===n.noMore||u?void 0:e())},e(),function(){return u=!0}})},n.mergeAll=function(){var t;return t=1<=arguments.length?dn.call(arguments,0):[],z(t[0])&&(t=t[0]),ln.apply(null,[n,"mergeAll"].concat(dn.call(t),[pn.fold(t,n.never(),function(t,n){return t.merge(n)})]))},n.zipAsArray=function(){var t;return t=1<=arguments.length?dn.call(arguments,0):[],z(t[0])&&(t=t[0]),ln.apply(null,[n,"zipAsArray"].concat(dn.call(t),[n.zipWith(t,function(){var t;return t=1<=arguments.length?dn.call(arguments,0):[]})]))},n.zipWith=function(){var t,r,e;return t=arguments[0],r=2<=arguments.length?dn.call(arguments,1):[],D(t)||(e=[t,r[0]],r=e[0],t=e[1]),r=pn.map(function(t){return t.toEventStream()},r),ln.apply(null,[n,"zipWith",t].concat(dn.call(r),[n.when(r,t)]))},n.groupSimultaneous=function(){var t,r,e;return e=1<=arguments.length?dn.call(arguments,0):[],1===e.length&&z(e[0])&&(e=e[0]),r=function(){var n,r,u;for(u=[],n=0,r=e.length;r>n;n++)t=e[n],u.push(new o(t));return u}(),ln.apply(null,[n,"groupSimultaneous"].concat(dn.call(e),[n.when(r,function(){var t;return t=1<=arguments.length?dn.call(arguments,0):[]})]))},n.combineAsArray=function(){var t,r,e,u,o,i,a;for(o=1<=arguments.length?dn.call(arguments,0):[],1===o.length&&z(o[0])&&(o=o[0]),t=i=0,a=o.length;a>i;t=++i)u=o[t],H(u)||(o[t]=n.constant(u));return o.length?(e=function(){var t,n,e;for(e=[],t=0,n=o.length;n>t;t++)r=o[t],e.push(new E(r,!0,!1,r.subscribeInternal));return e}(),ln.apply(null,[n,"combineAsArray"].concat(dn.call(o),[n.when(e,function(){var t;return t=1<=arguments.length?dn.call(arguments,0):[]}).toProperty()]))):n.constant([])},n.onValues=function(){var t,r,e;return r=2<=arguments.length?dn.call(arguments,0,e=arguments.length-1):(e=0,[]),t=arguments[e++],n.combineAsArray(r).onValues(t)},n.combineWith=function(){var t,r;return t=arguments[0],r=2<=arguments.length?dn.call(arguments,1):[],ln.apply(null,[n,"combineWith",t].concat(dn.call(r),[n.combineAsArray(r).map(function(n){return t.apply(null,n)})]))},n.combineTemplate=function(t){var r,e,u,o,i,a,s,c,f,l;return s=[],l=[],a=function(t){return t[t.length-1]},f=function(t,n,r){return a(t)[n]=r},r=function(t,n){return function(r,e){return f(r,t,e[n])}},i=function(t,n){return function(r){return f(r,t,n)}},c=function(t){return z(t)?[]:{}},u=function(t,n){var e,u;return H(n)?(l.push(n),s.push(r(t,l.length-1))):n!==Object(n)||"function"==typeof n||n instanceof RegExp||n instanceof Date?s.push(i(t,n)):(u=function(t){return function(r){var e;return e=c(n),f(r,t,e),r.push(e)}},e=function(t){return t.pop()},s.push(u(t)),o(n),s.push(e))},o=function(t){return pn.each(t,u)},o(t),e=function(n){var r,e,u,o,i;for(u=c(t),r=[u],o=0,i=s.length;i>o;o++)(e=s[o])(r,n);return u},ln(n,"combineTemplate",t,n.combineAsArray(l).map(e))},Y=0,h=function(){function t(){this.id=++Y}return t.prototype.isEvent=function(){return!0},t.prototype.isEnd=function(){return!1},t.prototype.isInitial=function(){return!1},t.prototype.isNext=function(){return!1},t.prototype.isError=function(){return!1},t.prototype.hasValue=function(){return!1},t.prototype.filter=function(){return!0},t.prototype.inspect=function(){return this.toString()},t}(),d=function(t){function n(t){n.__super__.constructor.call(this),this.value=D(t)?pn.cached(t):pn.always(t)}return vn(n,t),n.prototype.isNext=function(){return!0},n.prototype.hasValue=function(){return!0},n.prototype.fmap=function(t){return this.apply(function(n){return function(){return t(n.value())}}(this))},n.prototype.apply=function(t){return new n(t)},n.prototype.filter=function(t){return t(this.value())},n.prototype.toString=function(){return pn.toString(this.value())},n}(h),m=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return vn(n,t),n.prototype.isInitial=function(){return!0},n.prototype.isNext=function(){return!1},n.prototype.apply=function(t){return new n(t)},n.prototype.toNext=function(){return new d(this.value)},n}(d),f=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return vn(n,t),n.prototype.isEnd=function(){return!0},n.prototype.fmap=function(){return this},n.prototype.apply=function(){return this},n.prototype.toString=function(){return"<end>"},n}(h),l=function(t){function n(t){this.error=t}return vn(n,t),n.prototype.isError=function(){return!0},n.prototype.fmap=function(){return this},n.prototype.apply=function(){return this},n.prototype.toString=function(){return"<error> "+pn.toString(this.error)},n}(h),j=0,v=function(){function t(t){this.combine=yn(this.combine,this),this.flatMapLatest=yn(this.flatMapLatest,this),this.fold=yn(this.fold,this),this.scan=yn(this.scan,this),this.id=++j,this.assign=this.onValue,ln(t,this)}return t.prototype.onValue=function(){var t;return t=K(arguments),this.subscribe(function(n){return n.hasValue()?t(n.value()):void 0})},t.prototype.onValues=function(t){return this.onValue(function(n){return t.apply(null,n)})},t.prototype.onError=function(){var t;return t=K(arguments),this.subscribe(function(n){return n.isError()?t(n.error):void 0})},t.prototype.onEnd=function(){var t;return t=K(arguments),this.subscribe(function(n){return n.isEnd()?t():void 0})},t.prototype.errors=function(){return ln(this,"errors",this.filter(function(){return!1}))},t.prototype.filter=function(){var t,r;return r=arguments[0],t=2<=arguments.length?dn.call(arguments,1):[],W(this,r,t,function(t){return ln(this,"filter",t,this.withHandler(function(r){return r.filter(t)?this.push(r):n.more}))})},t.prototype.takeWhile=function(){var t,r;return r=arguments[0],t=2<=arguments.length?dn.call(arguments,1):[],W(this,r,t,function(t){return ln(this,"takeWhile",t,this.withHandler(function(r){return r.filter(t)?this.push(r):(this.push(X()),n.noMore)}))})},t.prototype.endOnError=function(){var t,n;return n=arguments[0],t=2<=arguments.length?dn.call(arguments,1):[],null==n&&(n=!0),W(this,n,t,function(t){return ln(this,"endOnError",this.withHandler(function(n){return n.isError()&&t(n.error)?(this.push(n),this.push(X())):this.push(n)}))})},t.prototype.take=function(t){return 0>=t?n.never():ln(this,"take",t,this.withHandler(function(r){return r.hasValue()?(t--,t>0?this.push(r):(0===t&&this.push(r),this.push(X()),n.noMore)):this.push(r)}))},t.prototype.map=function(){var t,n;return n=arguments[0],t=2<=arguments.length?dn.call(arguments,1):[],n instanceof y?n.sampledBy(this,N):W(this,n,t,function(t){return ln(this,"map",t,this.withHandler(function(n){return this.push(n.fmap(t))}))})},t.prototype.mapError=function(){var t;return t=K(arguments),ln(this,"mapError",t,this.withHandler(function(n){return this.push(n.isError()?$(t(n.error)):n)}))},t.prototype.mapEnd=function(){var t;return t=K(arguments),ln(this,"mapEnd",t,this.withHandler(function(r){return r.isEnd()?(this.push($(t(r))),this.push(X()),n.noMore):this.push(r)}))},t.prototype.doAction=function(){var t;return t=K(arguments),ln(this,"doAction",t,this.withHandler(function(n){return n.hasValue()&&t(n.value()),this.push(n)}))},t.prototype.skip=function(t){return ln(this,"skip",t,this.withHandler(function(r){return r.hasValue()&&t>0?(t--,n.more):this.push(r)}))},t.prototype.skipDuplicates=function(t){return null==t&&(t=function(t,n){return t===n}),ln(this,"skipDuplicates",this.withStateMachine(g,function(n,r){return r.hasValue()?r.isInitial()||n===g||!t(n.get(),r.value())?[new w(r.value()),[r]]:[n,[]]:[n,[r]]}))},t.prototype.skipErrors=function(){return ln(this,"skipErrors",this.withHandler(function(t){return t.isError()?n.more:this.push(t)}))},t.prototype.withStateMachine=function(t,r){var e;return e=t,ln(this,"withStateMachine",t,r,this.withHandler(function(t){var u,o,i,a,s,c,f;for(u=r(e,t),o=u[0],a=u[1],e=o,s=n.more,c=0,f=a.length;f>c;c++)if(i=a[c],s=this.push(i),s===n.noMore)return s;return s}))},t.prototype.scan=function(t,r,e){var u,o,i,a,s;return o=un(r),r=e?o:function(t,n){return o(t(),n())},u=cn(t).map(function(t){return pn.always(t)}),a=this,s=function(t){return function(e){var o,a,s,c;return o=!1,c=G,a=n.more,s=function(){return o?void 0:u.forEach(function(t){return o=!0,a=e(new m(t)),a===n.noMore?(c(),c=G):void 0})},c=t.subscribeInternal(function(t){var i,c;return t.hasValue()?o&&t.isInitial()?n.more:(t.isInitial()||s(),o=!0,c=u.getOrElse(function(){return void 0}),i=pn.cached(function(){return r(c,t.value)}),u=new w(i),e(t.apply(i))):(t.isEnd()&&(a=s()),a!==n.noMore?e(t):void 0)}),x.whenDoneWith(i,s),c}}(this),i=new y(_(this,"scan",t,r),s)},t.prototype.fold=function(t,n){return ln(this,"fold",t,n,this.scan(t,n).sampledBy(this.filter(!1).mapEnd().toProperty()))},t.prototype.zip=function(t,r){return null==r&&(r=Array),ln(this,"zip",t,n.zipWith([this,t],r))},t.prototype.diff=function(t,n){return n=un(n),ln(this,"diff",t,n,this.scan([t],function(t,r){return[r,n(t[0],r)]}).filter(function(t){return 2===t.length}).map(function(t){return t[1]}))},t.prototype.flatMap=function(){return q(this,Z(arguments))},t.prototype.flatMapFirst=function(){return q(this,Z(arguments),!0)},t.prototype.flatMapLatest=function(){var t,n;return t=Z(arguments),n=this.toEventStream(),ln(this,"flatMapLatest",t,n.flatMap(function(){return function(r){return J(t(r)).takeUntil(n)}}(this)))},t.prototype.not=function(){return ln(this,"not",this.map(function(t){return!t}))},t.prototype.log=function(){var t;return t=1<=arguments.length?dn.call(arguments,0):[],this.subscribe(function(n){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log.apply(console,dn.call(t).concat([n.toString()])):void 0}),this},t.prototype.slidingWindow=function(t,n){return null==n&&(n=0),ln(this,"slidingWindow",t,n,this.scan([],function(n,r){return n.concat([r]).slice(-t)}).filter(function(t){return t.length>=n}))},t.prototype.combine=function(t,r){var e;return e=un(r),ln(this,"combine",t,r,n.combineAsArray(this,t).map(function(t){return e(t[0],t[1])}))},t.prototype.decode=function(t){return ln(this,"decode",t,this.combine(n.combineTemplate(t),function(t,n){return n[t]}))},t.prototype.awaiting=function(t){return ln(this,"awaiting",t,n.groupSimultaneous(this,t).map(function(t){var n,r;return n=t[0],r=t[1],0===r.length}).toProperty(!1).skipDuplicates())},t.prototype.name=function(t){return this.toString=function(){return t},this},t.prototype.withDescription=function(){return _.apply(null,arguments).apply(this)},t}(),v.prototype.reduce=v.prototype.fold,q=function(t,r,e){return new p(_(t,"flatMap"+(e?"First":""),r),function(u){var o,i;return i=new a,o=function(t){return t(),i.empty()?u(X()):void 0},i.add(function(a,s){return t.subscribeInternal(function(t){var a;return t.isEnd()?o(s):t.isError()?u(t):e&&i.count()>1?n.more:i.unsubscribed?n.noMore:(a=J(r(t.value())),i.add(function(t,r){return a.subscribeInternal(function(e){var i;return e.isEnd()?(o(r),n.noMore):(e instanceof m&&(e=e.toNext()),i=u(e),i===n.noMore&&t(),i)})}))})}),i.unsubscribe})},p=function(t){function r(t,n){this.takeUntil=yn(this.takeUntil,this),this.sampledBy=yn(this.sampledBy,this);var e;D(t)&&(n=t,t=[]),r.__super__.constructor.call(this,t),A(n),e=new c(n),this.subscribeInternal=e.subscribe,this.subscribe=x.wrappedSubscribe(this),this.hasSubscribers=e.hasSubscribers,rn(this)}return vn(r,t),r.prototype.delay=function(t){return ln(this,"delay",t,this.flatMap(function(r){return n.later(t,r)}))},r.prototype.debounce=function(t){return ln(this,"debounce",t,this.flatMapLatest(function(r){return n.later(t,r)}))},r.prototype.debounceImmediate=function(t){return ln(this,"debounceImmediate",t,this.flatMapFirst(function(r){return n.once(r).concat(n.later(t).filter(!1))}))},r.prototype.throttle=function(t){return ln(this,"throttle",t,this.bufferWithTime(t).map(function(t){return t[t.length-1]}))},r.prototype.bufferWithTime=function(t){return ln(this,"bufferWithTime",t,this.bufferWithTimeOrCount(t,Number.MAX_VALUE))},r.prototype.bufferWithCount=function(t){return ln(this,"bufferWithCount",t,this.bufferWithTimeOrCount(void 0,t))},r.prototype.bufferWithTimeOrCount=function(t,n){var r;return r=function(r){return r.values.length===n?r.flush():void 0!==t?r.schedule():void 0},ln(this,"bufferWithTimeOrCount",t,n,this.buffer(t,r,r))},r.prototype.buffer=function(t,r,e){var u,o,i;return null==r&&(r=function(){}),null==e&&(e=function(){}),u={scheduled:!1,end:null,values:[],flush:function(){var t;if(this.scheduled=!1,this.values.length>0){if(t=this.push($(this.values)),this.values=[],null!=this.end)return this.push(this.end);if(t!==n.noMore)return e(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){return this.scheduled?void 0:(this.scheduled=!0,t(function(t){return function(){return t.flush()}}(this)))}},i=n.more,D(t)||(o=t,t=function(t){return n.scheduler.setTimeout(t,o)}),ln(this,"buffer",this.withHandler(function(t){return u.push=this.push,t.isError()?i=this.push(t):t.isEnd()?(u.end=t,u.scheduled||u.flush()):(u.values.push(t.value()),r(u)),i}))},r.prototype.merge=function(t){var e;return S(t),e=this,new r(_(e,"merge",t),function(r){var u,o;return u=0,o=function(t){return function(e){return t.subscribeInternal(function(t){var o;return t.isEnd()?(u++,2===u?r(X()):n.more):(o=r(t),o===n.noMore&&e(),o)})}},P(o(e),o(t))})},r.prototype.toProperty=function(t){return 0===arguments.length&&(t=g),ln(this,"toProperty",t,this.scan(t,L,!0))},r.prototype.toEventStream=function(){return this},r.prototype.sampledBy=function(t,n){return ln(this,"sampledBy",t,n,this.toProperty().sampledBy(t,n))},r.prototype.concat=function(t){var n;return n=this,new r(_(n,"concat",t),function(r){var e,u;return u=G,e=n.subscribeInternal(function(n){return n.isEnd()?u=t.subscribeInternal(r):r(n)}),function(){return e(),u()}})},r.prototype.takeUntil=function(t){var r;return r={},ln(this,"takeUntil",t,n.groupSimultaneous(this.mapEnd(r),t.skipErrors()).withHandler(function(e){var u,o,i,a,s,c;if(e.hasValue()){if(c=e.value(),u=c[0],t=c[1],t.length)return this.push(X());for(o=n.more,a=0,s=u.length;s>a;a++)i=u[a],o=this.push(i===r?X():$(i));return o}return this.push(e)}))},r.prototype.skipUntil=function(t){var n;return n=t.take(1).map(!0).toProperty(!1),ln(this,"skipUntil",t,this.filter(n))},r.prototype.skipWhile=function(){var t,r,e;return r=arguments[0],t=2<=arguments.length?dn.call(arguments,1):[],e=!1,W(this,r,t,function(t){return ln(this,"skipWhile",t,this.withHandler(function(r){return!e&&r.hasValue()&&t(r.value())?n.more:(r.hasValue()&&(e=!0),this.push(r))}))})},r.prototype.startWith=function(t){return ln(this,"startWith",t,n.once(t).concat(this))},r.prototype.withHandler=function(t){var n;return n=new c(this.subscribeInternal,t),new r(_(this,"withHandler",t),n.subscribe)},r}(v),y=function(t){function r(t,e,u){this.toEventStream=yn(this.toEventStream,this),this.toProperty=yn(this.toProperty,this),this.changes=yn(this.changes,this),this.sample=yn(this.sample,this),D(t)&&(u=e,e=t,t=[]),r.__super__.constructor.call(this,t),A(e),this.subscribeInternal=u===!0?e:new b(this,e,u).subscribe,this.sampledBy=function(t){return function(e,u){var o,i,a,s,c;return null!=u?u=un(u):(o=!0,u=function(t){return t()}),c=new E(t,!1,!1,t.subscribeInternal,o),a=new E(e,!0,!1,e.subscribeInternal,o),s=n.when([c,a],u),i=e instanceof r?s.toProperty():s,ln(t,"sampledBy",e,u,i)}}(this),this.subscribe=x.wrappedSubscribe(this),rn(this)}return vn(r,t),r.prototype.sample=function(t){return ln(this,"sample",t,this.sampledBy(n.interval(t,{})))},r.prototype.changes=function(){return new p(_(this,"changes"),function(t){return function(n){return t.subscribeInternal(function(t){return t.isInitial()?void 0:n(t)})}}(this))},r.prototype.withHandler=function(t){return new r(_(this,"withHandler",t),this.subscribeInternal,t)},r.prototype.toProperty=function(){return T(arguments),this},r.prototype.toEventStream=function(){return new p(_(this,"toEventStream"),function(t){return function(n){return t.subscribeInternal(function(t){return t.isInitial()&&(t=t.toNext()),n(t)})}}(this))},r.prototype.and=function(t){return ln(this,"and",t,this.combine(t,function(t,n){return t&&n}))},r.prototype.or=function(t){return ln(this,"or",t,this.combine(t,function(t,n){return t||n}))},r.prototype.delay=function(t){return this.delayChanges("delay",t,function(n){return n.delay(t)})},r.prototype.debounce=function(t){return this.delayChanges("debounce",t,function(n){return n.debounce(t)})},r.prototype.throttle=function(t){return this.delayChanges("throttle",t,function(n){return n.throttle(t)})},r.prototype.delayChanges=function(){var t,n,r;return t=2<=arguments.length?dn.call(arguments,0,r=arguments.length-1):(r=0,[]),n=arguments[r++],ln.apply(null,[this].concat(dn.call(t),[I(this,n(this.changes()))]))},r.prototype.takeUntil=function(t){var n;return n=this.changes().takeUntil(t),ln(this,"takeUntil",t,I(this,n))},r.prototype.startWith=function(t){return ln(this,"startWith",t,this.scan(t,function(t,n){return n}))},r}(v),W=function(t,n,r,e){var u;return n instanceof y?(u=n.sampledBy(t,function(t,n){return[t,n]}),e.apply(u,[function(t){var n,r;return n=t[0],r=t[1],n}]).map(function(t){var n,r;return n=t[0],r=t[1]})):(n=R(n,r),e.apply(t,[n]))},I=function(t,r){var e;return e=new p(_(t,"justInitValue"),function(r){var u,o;return o=null,u=t.subscribeInternal(function(t){return t.hasValue()&&(o=t),n.noMore}),x.whenDoneWith(e,function(){return null!=o&&r(o),r(X())}),u}),e.concat(r).toProperty()},c=function(){function t(t,r){var e,u,o,i,a,s,c,f,l,h;null==t&&(t=function(){return G}),f=[],s=null,a=!1,u=!1,this.hasSubscribers=function(){return f.length>0},o=null,l=G,c=function(t){return f=pn.without(t,f)},h=null,e=function(){var t,n,r,e,u;if(null!=h){for(n=h,h=null,u=[],r=0,e=n.length;e>r;r++)t=n[r],u.push(t());return u}},i=function(t){var r,u,i,h,p,m;if(a)return s=(s||[]).concat([t]),n.more;if(t!==o){t.isError()&&(o=t),i=!1;try{for(a=!0,h=f,p=0,m=h.length;m>p;p++)u=h[p],r=u.sink(t),(r===n.noMore||t.isEnd())&&c(u);i=!0}finally{a=!1,i||(s=null)}for(i=!0;null!=s?s.length:void 0;)t=pn.head(s),s=pn.tail(s),this.push(t);return e(t),this.hasSubscribers()?n.more:(l(),n.noMore)}},this.push=function(t){return function(n){return x.inTransaction(n,t,i,[n])}}(this),null==r&&(r=function(t){return this.push(t)}),this.handleEvent=function(t){return function(n){return n.isEnd()&&(u=!0),r.apply(t,[n])}}(this),this.subscribe=function(n){return function(r){var e,o;return u?(r(X()),G):(A(r),e={sink:r},f=f.concat(e),1===f.length&&(o=t(n.handleEvent),l=function(){return o(),l=G}),A(l),function(){return c(e),n.hasSubscribers()?void 0:l()})}}(this)}return t}(),b=function(t){function r(t,e,u){var o,i,a,s;r.__super__.constructor.call(this,e,u),o=g,i=void 0,s=this.push,e=this.subscribe,a=!1,this.push=function(t){return function(n){return n.isEnd()&&(a=!0),n.hasValue()&&(o=new w(n),i=x.currentEventId()),s.apply(t,[n])}}(this),this.subscribe=function(r){return function(u){var s,c,f,l,h;return c=!1,l=n.more,f=function(){return l===n.noMore?G:a?(u(X()),G):e.apply(this,[u])},o.isDefined&&(r.hasSubscribers()||a)?(s=x.currentEventId(),h=i,!a&&h&&s&&s!==h?(x.whenDoneWith(t,function(){return i===h?u(F(o.get().value())):void 0}),f()):(x.inTransaction(void 0,r,function(){return l=u(F(o.get().value()))},[]),f())):f()}}(this)}return vn(r,t),r}(c),i=function(t){function r(){var t,e,u,o,i,a,s,c;u=void 0,a=[],t=!1,e=function(){return function(t){return function(r){return r.isEnd()?(c(t),n.noMore):u(r)}}}(this),s=function(){var t,n,r,e;for(e=[],n=0,r=a.length;r>n;n++)t=a[n],e.push("function"==typeof t.unsub?t.unsub():void 0);return e},i=function(t){return t.unsub=t.input.subscribeInternal(e(t.input))},c=function(t){var n,r,e,u;for(n=e=0,u=a.length;u>e;n=++e)if(r=a[n],r.input===t)return"function"==typeof r.unsub&&r.unsub(),void a.splice(n,1)},o=function(){return function(t){var n,r,e,o;for(u=t,o=C(a),r=0,e=o.length;e>r;r++)n=o[r],i(n);return s}}(this),r.__super__.constructor.call(this,_(n,"Bus"),o),this.plug=function(){return function(n){var r;if(!t)return r={input:n},a.push(r),null!=u&&i(r),function(){return c(n)}}}(this),this.push=function(){return function(t){return"function"==typeof u?u($(t)):void 0}}(this),this.error=function(){return function(t){return"function"==typeof u?u(new l(t)):void 0}}(this),this.end=function(){return function(){return t=!0,s(),"function"==typeof u?u(X()):void 0}}(this)}return vn(r,t),r}(p),E=function(){function t(t,n,r,e,u,o){var i;this.obs=t,this.sync=n,this.subscribe=e,null==u&&(u=!1),null==o&&(o=[]),i=u?function(t){return function(){return t}}:pn.id,null==this.subscribe&&(this.subscribe=t.subscribeInternal),this.markEnded=function(){return this.ended=!0},this.toString=this.obs.toString,r?(this.consume=function(){return i(o.shift())},this.push=function(t){return o.push(t)},this.mayHave=function(t){return!this.ended||o.length>=t},this.hasAtLeast=function(t){return o.length>=t},this.flatten=!1):(this.consume=function(){return i(o[0])},this.push=function(t){return o=[t]},this.mayHave=function(){return!0},this.hasAtLeast=function(){return o.length},this.flatten=!0)}return t}(),o=function(t){function n(t){var r;this.obs=t,r=[],n.__super__.constructor.call(this,this.obs,!0,!1,this.obs.subscribeInternal,!1,r),this.consume=function(){var t;return t=r,r=[],function(){return t}},this.push=function(t){return r.push(t())},this.hasAtLeast=function(){return!0}}return vn(n,t),n}(E),E.fromObservable=function(t){return t instanceof E?t:t instanceof y?new E(t,!1,!1):new E(t,!0,!0)},_=function(){var t,n,r;return n=arguments[0],r=arguments[1],t=3<=arguments.length?dn.call(arguments,2):[],(n||r)instanceof s?n||r:new s(n,r,t)},s=function(){function t(t,n,r){var e,u,o,i;o=function(t){return z(t)?pn.flatMap(o,t):H(t)?[t]:t instanceof E?[t.obs]:[]},i=null,e=function(t){var n,r,u,o,a;for(r=t.internalDeps(),a=[],u=0,o=r.length;o>u;u++)n=r[u],i[n.id]=!0,a.push(e(n));return a},u=function(t){return null==i&&(i={},e(this)),i[t.id]},this.apply=function(e){var i;return i=pn.cached(function(){return o([t].concat(r))}),e.internalDeps=e.internalDeps||i,e.dependsOn=u,e.deps=i,e.toString=function(){return pn.toString(t)+"."+pn.toString(n)+"("+pn.map(pn.toString,r)+")"},e.inspect=function(){return e.toString()},e.desc=function(){return{context:t,method:n,args:r}},e}}return t}(),ln=function(){var t,n,r;return t=2<=arguments.length?dn.call(arguments,0,r=arguments.length-1):(r=0,[]),n=arguments[r++],_.apply(null,t).apply(n)},n.when=function(){var t,r,e,u,o,i,a,s,c,f,l,h,m,d,g,v,y,b,w;if(f=1<=arguments.length?dn.call(arguments,0):[],0===f.length)return n.never();for(o=f.length,d="when: expecting arguments in the form (Observable+,function)+",k(d,o%2===0),m=[],c=[],r=0;o>r;){for(s=pn.toArray(f[r]),t=f[r+1],a={f:D(t)?t:function(){return t},ixs:[]},g=0,y=s.length;y>g;g++){for(h=s[g],k(H(h),d),e=pn.indexOf(m,h),0>e&&(m.push(h),e=m.length-1),w=a.ixs,v=0,b=w.length;b>v;v++)u=w[v],u.index===e&&u.count++;a.ixs.push({index:e,count:1})}s.length>0&&c.push(a),r+=2}return m.length?(m=pn.map(E.fromObservable,m),i=pn.any(m,function(t){return t.flatten})&&B(pn.map(function(t){return t.obs},m)),l=new p(_.apply(null,[n,"when"].concat(dn.call(f))),function(t){var e,u,o,a,s,f,p;return p=[],o=!1,a=function(t){var n,e,u;for(u=t.ixs,n=0,e=u.length;e>n;n++)if(r=u[n],!m[r.index].hasAtLeast(r.count))return!1;return!0},u=function(t){return!t.sync||t.ended},e=function(t){var n,e,u;for(u=t.ixs,n=0,e=u.length;e>n;n++)if(r=u[n],!m[r.index].mayHave(r.count))return!0},s=function(t){return!t.source.flatten},f=function(f){return function(h){var d,g,v;return g=function(){return x.whenDoneWith(l,d)},v=function(){var e,u,o,f,l,h;if(!(p.length>0))return n.more;for(o=n.more,f=p.pop(),l=0,h=c.length;h>l;l++)if(u=c[l],a(u))return e=function(){var t,n,e,o;for(e=u.ixs,o=[],t=0,n=e.length;n>t;t++)r=e[t],o.push(m[r.index].consume());return o}(),o=t(f.e.apply(function(){var t,n;return n=function(){var n,r,u;for(u=[],n=0,r=e.length;r>n;n++)t=e[n],u.push(t());return u}(),u.f.apply(u,n)})),p.length&&i&&(p=pn.filter(s,p)),o===n.noMore?o:v()},d=function(){var r;return r=v(),o&&(o=!1,(pn.all(m,u)||pn.all(c,e))&&(r=n.noMore,t(X()))),r===n.noMore&&h(),r},f.subscribe(function(r){var e;return r.isEnd()?(o=!0,f.markEnded(),g()):r.isError()?e=t(r):(f.push(r.value),f.sync&&(p.push({source:f,e:r}),i?g():d())),e===n.noMore&&h(),e||n.more})}},P.apply(null,function(){var t,n,r;for(r=[],t=0,n=m.length;n>t;t++)h=m[t],r.push(f(h));return r}())})):n.never()},B=function(t,r){var e;return null==r&&(r=[]),e=function(t){var u;return n._.contains(r,t)?!0:(u=t.internalDeps(),u.length?(r.push(t),n._.any(u,e)):(r.push(t),!1))},n._.any(t,e)},n.update=function(){var t,r,e,u;for(r=arguments[0],u=2<=arguments.length?dn.call(arguments,1):[],e=function(t){return function(){var n;return n=1<=arguments.length?dn.call(arguments,0):[],function(r){return t.apply(null,[r].concat(n))}}},t=u.length-1;t>0;)u[t]instanceof Function||(u[t]=function(t){return function(){return t}}(u[t])),u[t]=e(u[t]),t-=2;return ln.apply(null,[n,"update",r].concat(dn.call(u),[n.when.apply(n,u).scan(r,function(t,n){return n(t)})]))},P=function(){var t;return t=1<=arguments.length?dn.call(arguments,0):[],new a(t).unsubscribe},a=function(){function t(t){var n,r,e;for(null==t&&(t=[]),this.empty=yn(this.empty,this),this.count=yn(this.count,this),this.unsubscribe=yn(this.unsubscribe,this),this.add=yn(this.add,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[],r=0,e=t.length;e>r;r++)n=t[r],this.add(n)}return t.prototype.add=function(t){var n,r,e;if(!this.unsubscribed)return n=!1,r=G,this.starting.push(t),e=function(e){return function(){return e.unsubscribed?void 0:(n=!0,e.remove(r),pn.remove(t,e.starting))}}(this),r=t(this.unsubscribe,e),this.unsubscribed||n||this.subscriptions.push(r),pn.remove(t,this.starting),r},t.prototype.remove=function(t){return this.unsubscribed?void 0:void 0!==pn.remove(t,this.subscriptions)?t():void 0},t.prototype.unsubscribe=function(){var t,n,r,e;if(!this.unsubscribed){for(this.unsubscribed=!0,e=this.subscriptions,n=0,r=e.length;r>n;n++)(t=e[n])();return this.subscriptions=[],this.starting=[]}},t.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},t.prototype.empty=function(){return 0===this.count()},t}(),n.CompositeUnsubscribe=a,w=function(){function t(t){this.value=t}return t.prototype.getOrElse=function(){return this.value},t.prototype.get=function(){return this.value},t.prototype.filter=function(n){return n(this.value)?new t(this.value):g},t.prototype.map=function(n){return new t(n(this.value))},t.prototype.forEach=function(t){return t(this.value)},t.prototype.isDefined=!0,t.prototype.toArray=function(){return[this.value]},t.prototype.inspect=function(){return"Some("+this.value+")"},t.prototype.toString=function(){return this.inspect()},t}(),g={getOrElse:function(t){return t},filter:function(){return g},map:function(){return g},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}},x=function(){var t,r,e,u,o,i,a,s,c,f,l;return s=void 0,c=[],r=[],t=function(t){return s?r.push(t):t()},a=function(t){return!pn.any(c,function(n){return t.obs.dependsOn(n.obs)})},f=function(t,n){return s?c.push({obs:t,f:n}):n()},u=function(){for(;!a(c[0]);)c.push(c.splice(0,1)[0]);return c.splice(0,1)[0]},o=function(){var t;for(t=[];c.length;)t.push(u().f());return t},i=function(t,n,e,u){var i;if(s)return e.apply(n,u);s=t;try{i=e.apply(n,u),o()}finally{for(s=void 0;r.length;)(e=r.splice(0,1)[0])()}return i},e=function(){return s?s.id:void 0},l=function(r){return function(e){var u,o,i;return i=!1,u=function(){},o=function(){return i=!0,u()},i||(u=r.subscribeInternal(function(r){return t(function(){var t;return i||(t=e(r),t!==n.noMore)?void 0:o()})})),o}},{whenDoneWith:f,inTransaction:i,currentEventId:e,wrappedSubscribe:l}}(),n.EventStream=p,n.Property=y,n.Observable=v,n.Bus=i,n.Initial=m,n.Next=d,n.End=f,n.Error=l,G=function(){},L=function(t,n){return n()},N=function(t){return t},F=function(t){return new m(pn.always(t))},$=function(t){return new d(pn.always(t))},X=function(){return new f},on=function(t){return t instanceof h?t:$(t)},C=function(t){return t.slice(0)},k=function(t,n){if(!n)throw t},S=function(t){if(!(t instanceof p))throw"not an EventStream : "+t},A=function(t){return k("not a function : "+t,D(t))},D=function(t){return"function"==typeof t},z=function(t){return t instanceof Array},H=function(t){return t instanceof v},M=function(t){if(!z(t))throw"not an array : "+t},T=function(t){return k("no arguments supported",0===t.length)},O=function(t){if("string"!=typeof t)throw"not a string : "+t},tn=function(t,n){return function(){var r;return r=1<=arguments.length?dn.call(arguments,0):[],t.apply(null,n.concat(r))}},Z=function(t){return 1===t.length&&H(t[0])?pn.always(t[0]):K(t)},K=function(t){return t=Array.prototype.slice.call(t),Q.apply(null,t)},Q=hn(function(){var t,n;return n=arguments[0],t=2<=arguments.length?dn.call(arguments,1):[],D(n)?t.length?tn(n,t):n:V(n)?an(n,t):pn.always(n)}),R=function(t,n){return Q.apply(null,[t].concat(dn.call(n)))},J=function(t){return H(t)?t:n.once(t)},V=function(t){return"string"==typeof t&&t.length>1&&"."===t.charAt(0)},n.isFieldKey=V,an=function(t,n){var r,e;return e=t.slice(1).split("."),r=pn.map(fn(n),e),function(n){var e,u;for(e=0,u=r.length;u>e;e++)t=r[e],n=t(n);return n}},fn=function(t){return function(n){return function(r){var e;return null==r?void 0:(e=r[n],D(e)?e.apply(r,t):e)}}},sn=function(t){return t.slice(1)},un=function(t){var n;return D(t)?t:V(t)?(n=sn(t),function(t,r){return t[n](r)}):k("not a function or a field key: "+t,!1)},cn=function(t){return t instanceof w||t===g?t:new w(t)},pn={indexOf:Array.prototype.indexOf?function(t,n){return t.indexOf(n)}:function(t,n){var r,e,u,o;for(r=u=0,o=t.length;o>u;r=++u)if(e=t[r],n===e)return r;return-1},indexWhere:function(t,n){var r,e,u,o;for(r=u=0,o=t.length;o>u;r=++u)if(e=t[r],n(e))return r;return-1},head:function(t){return t[0]},always:function(t){return function(){return t}},negate:function(t){return function(n){return!t(n)}},empty:function(t){return 0===t.length},tail:function(t){return t.slice(1,t.length)},filter:function(t,n){var r,e,u,o;for(r=[],u=0,o=n.length;o>u;u++)e=n[u],t(e)&&r.push(e);return r},map:function(t,n){var r,e,u,o;for(o=[],e=0,u=n.length;u>e;e++)r=n[e],o.push(t(r));return o},each:function(t,n){var r,e,u;u=[];for(r in t)e=t[r],u.push(n(r,e));return u},toArray:function(t){return z(t)?t:[t]},contains:function(t,n){return-1!==pn.indexOf(t,n)},id:function(t){return t},last:function(t){return t[t.length-1]},all:function(t,n){var r,e,u;for(null==n&&(n=pn.id),e=0,u=t.length;u>e;e++)if(r=t[e],!n(r))return!1;return!0},any:function(t,n){var r,e,u;for(null==n&&(n=pn.id),e=0,u=t.length;u>e;e++)if(r=t[e],n(r))return!0;return!1},without:function(t,n){return pn.filter(function(n){return n!==t},n)},remove:function(t,n){var r;return r=pn.indexOf(n,t),r>=0?n.splice(r,1):void 0},fold:function(t,n,r){var e,u,o;for(u=0,o=t.length;o>u;u++)e=t[u],n=r(n,e);return n},flatMap:function(t,n){return pn.fold(n,[],function(n,r){return n.concat(t(r))})},cached:function(t){var n;return n=g,function(){return n===g&&(n=t(),t=null),n}},toString:function(t){var n,r,e,u;try{return nn++,null==t?"undefined":D(t)?"function":z(t)?nn>5?"[..]":"["+pn.map(pn.toString,t).toString()+"]":null!=(null!=t?t.toString:void 0)&&t.toString!==Object.prototype.toString?t.toString():"object"==typeof t?nn>5?"{..}":(r=function(){var r;r=[];for(e in t)gn.call(t,e)&&(u=function(){try{return t[e]}catch(t){return n=t}}(),r.push(pn.toString(e)+":"+pn.toString(u)));return r}(),"{"+r+"}"):t}finally{nn--}}},nn=0,n._=pn,n.scheduler={setTimeout:function(t,n){return setTimeout(t,n)},setInterval:function(t,n){return setInterval(t,n)},clearInterval:function(t){return clearInterval(t)},now:function(){return(new Date).getTime()}},"undefined"!=typeof t&&null!==t?(t.exports=n,n.Bacon=n):(null!==r(25)&&null!=r(26)&&(e=[],u=function(){return n}.apply(null,e),!(void 0!==u&&(t.exports=u))),this.Bacon=n)}).call(this)}).call(n,r(27)(t))},function(t,n,r){"use strict";t.exports={object:r(22),array:r(23),isImmutableCollection:r(24)}
},function(t,n,r){"use strict";var e=r(29),u=r(28);t.exports=function(t){return(new a).assoc(t)};var o=function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t=t.assoc(r,n[r]));return t},i=function(t,n,r){return new a(e.assoc(t,n.toString(),r))},a=function(t){t=t||e.Trie(),this.assoc=function(n,r){return 1===arguments.length?o(this,n):i(t,n,r)},this.dissoc=function(n){return new a(e.dissoc(t,n.toString()))},this.get=function(n){return e.get(t,n.toString())},this.has=function(n){return e.has(t,n.toString())},this.mutable=this.toJSON=function(){return e.mutable(t)};var n=function(n){var r=e.reduce(t,function(t,n,r){return e.reduce.Break({key:r,val:n})});return{seed:r.val,rest:n.dissoc(r.key)}};this.reduce=function(r,u){var o=this;if(1===arguments.length){var i=n(this);return u=i.seed,i.rest.reduce(r,u)}return e.reduce(t,function(t,n,e){return r(t,n,e,o)},u)},this.immutable=!0,u.freeze(this)};t.exports.prototype=a.prototype={constructor:t.exports,map:function(t){var n=this;return this.reduce(function(r,e,u){return r.assoc(u,t(e,u,n))},n)},forEach:function(t){var n=this;return this.reduce(function(r,e,u){t(e,u,n)},void 0)},every:function(t){var n=this;return this.reduce(function(r,u,o){return t(u,o,n)===!0?!0:new e.reduce.Break(!1)},!0)},some:function(t){var n=this;return this.reduce(function(r,u,o){return t(u,o,n)===!0?new e.reduce.Break(!0):!1},!1)},filter:function(t){var n=this;return this.reduce(function(r,e,u){return t(e,u,n)===!0?r.assoc(u,e):r},new a)},equal:function(t){var n=this;if(t===n)return!0;if(!t||!t.immutable)return!1;var r=t.every(function(t,r){return u.areEqual(t,n.get(r))}),e=n.every(function(n,r){return u.areEqual(n,t.get(r))});return r&&e}}},function(t,n,r){"use strict";var e=r(29),u=r(28),o=r(22);t.exports=function(t){return(new s).assoc(t)};var i=function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t=t.assoc(r,n[r]));return t},a=function(t,n,r,u){var o=parseInt(r,10)+1,i=Math.max(t.length,o||0),a=e.assoc(n,r.toString(),u);return new s(a,i)},s=function(t,n){t=t||e.Trie(),this.length=n||0,this.assoc=function(n,r){return 1===arguments.length?i(this,n):a(this,t,n,r)},this.dissoc=function(n){var r=e.dissoc(t,n.toString());return new s(r,this.length)},this.get=function(n){return e.get(t,n.toString())},this.has=function(n){return e.has(t,n.toString())},this.mutable=this.toJSON=function(){return u.extend([],e.mutable(t))},this.immutable=!0,u.freeze(this)},c=function(t){for(var n=0,r=t.length;r>n;n+=1)if(t.has(n))return n},f=function(t){for(var n=t.length-1;n>=0;n-=1)if(t.has(n))return n};t.exports.prototype=s.prototype={constructor:t.exports,map:function(t){for(var n=this,r=0,e=this.length;e>r;r+=1)this.has(r)&&(n=n.assoc(r,t(this.get(r),r,this)));return n},forEach:function(t){for(var n=0,r=this.length;r>n;n+=1)this.has(n)&&t(this.get(n),n.toString(),this)},every:function(t){for(var n=0,r=this.length;r>n;n+=1)if(this.has(n)&&t(this.get(n),n.toString(),this)!==!0)return!1;return!0},some:function(t){for(var n=0,r=this.length;r>n;n+=1)if(this.has(n)&&t(this.get(n),n.toString(),this)===!0)return!0;return!1},filter:function(t){for(var n=new s,r=0,e=this.length;e>r;r+=1)this.has(r)&&t(this.get(r),r.toString(),this)===!0&&(n=n.assoc(n.length,this.get(r)));return n},reduce:function(t,n){if(1===arguments.length){var r=c(this);return this.dissoc(r).reduce(t,this.get(r))}for(var e=0,u=this.length;u>e;e+=1)this.has(e)&&(n=t(n,this.get(e),e.toString(),this));return n},reduceRight:function(t,n){if(1===arguments.length){var r=f(this);return this.dissoc(r).reduceRight(t,this.get(r))}for(var e=this.length-1;e>=0;e-=1)this.has(e)&&(n=t(n,this.get(e),e.toString(),this));return n},push:function(t){return this.assoc(this.length,t)},indexOf:function(t){for(var n=0,r=this.length;r>n;n+=1)if(this.has(n)&&u.areEqual(t,this.get(n)))return n;return-1},equal:o.prototype.equal}},function(t){var n=["get","has","assoc","dissoc"],r=function(t){if("object"!=typeof t||null===t)return!1;for(var r=0,e=n.length;e>r;r+=1)if("function"!=typeof t[n[r]])return!1;return t.immutable!==!0?!1:!0};t.exports=r},function(t){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,n){(function(n){t.exports=n}).call(n,{})},function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,n,r){"use strict";var e=r(24),u=function(t,n){for(var r in n)t[r]=n[r];return t},o=function(t){return u({},t)},i=function(t,n,r){return[].slice.call(t,n,r)},a=function(t,n){var r={};for(var e in t)r[e]=n(t[e],e,t);return r},s=function(t){for(var n=i(arguments,1),r={},e=0;e<n.length;e+=1)r[n[e]]=t[n[e]];return r},c=Object.freeze||function(t){return t},f=function(t,n){return t&&"function"==typeof t.equal&&e(t)?t.equal(n):t===n};t.exports={extend:u,clone:o,slice:i,mapObj:a,pick:s,freeze:c,areEqual:f}},function(t,n,r){"use strict";var e=r(30),u=r(31),o=t.exports,i={eq:function(t,n){return t===n},hash:u.hash},a=o.Trie=function(t){return{type:"trie",children:t||{}}},s=o.Value=function(t,n){return{type:"value",key:t,value:n}},c=o.Hashmap=function(t){return{type:"hashmap",values:t}},f=function(t,n,r){return t=e.clone(t),t[n]=r,t};o.assoc=function(t,n,r,e){return l(t,n,r,e||i,0)};var l=function(t,n,r,e,u){return h[t.type](t,n,r,e,u)},h={trie:function(t,n,r,e,o){var i=u.mask(n,o,e.hash),c=t.children[i];return a(void 0===c?f(t.children,i,s(n,r)):f(t.children,i,l(c,n,r,e,o+1)))},value:function(t,n,r,e,o){var i=u.mask(t.key,o,e.hash),f=u.mask(n,o,e.hash),h=function(){var e={};return e[n]=s(n,r),e[t.key]=t,c(e)},p=function(){var e={};return e[i]=t,e[f]=s(n,r),a(e)},m=function(){var u={};return u[f]=l(t,n,r,e,o+1),a(u)},d=function(){return i!==f?p():m()};return e.eq(t.key,n)?s(n,r):o>6?h():d()},hashmap:function(t,n,r){var e=f(t.values,n,s(n,r));return c(e)}},p=function(t,n){return t=e.clone(t),delete t[n],t};o.dissoc=function(t,n,r){return m(t,n,r||i,0)};var m=function(t,n,r,e){return d[t.type](t,n,r,e)},d={trie:function(t,n,r,o){var i=u.mask(n,o,r.hash),c=t.children[i],f=function(){return a("value"===c.type&&r.eq(c.key,n)?p(t.children,i):p(t.children,i,m(c,n,r,o+1)))},l=function(t){var n=e.keys(t.children),r=t.children[n[0]];return 0===o?t:void 0===r?t:1===n.length&&"value"===r.type?s(r.key,r.value):t},h=function(){return l(f(t))};return void 0===c?t:h()},value:function(){},hashmap:function(t,n){var r=p(t.values,n),u=e.keys(r),o=r[u[0]];return 1===u.length?s(o.key,o.value):c(r)}};o.has=function(t,n,r){return g(t,n,r||i,0)};var g=function(t,n,r,e){return v[t.type](t,n,r,e)},v={trie:function(t,n,r,e){var o=t.children[u.mask(n,e,r.hash)];return void 0===o?!1:g(o,n,r,e+1)},value:function(t,n,r){return r.eq(t.key,n)},hashmap:function(t,n){return n in t.values}};o.get=function(t,n,r){return y(t,n,r||i,0)};var y=function(t,n,r,e){return b[t.type](t,n,r,e)},b={trie:function(t,n,r,e){var o=t.children[u.mask(n,e,r.hash)];return void 0===o?void 0:y(o,n,r,e+1)},value:function(t,n,r){return r.eq(t.key,n)?t.value:void 0},hashmap:function(t,n){var r=t.values[n];return r?r.value:void 0}};o.reduce=function(t,n,r){var e=w(t,n,r);return e instanceof x?e.value:e};var w=function(t,n,r){return E[t.type](t,n,r)},E={trie:function(t,n,r){for(var e in t.children)if(t.children.hasOwnProperty(e)&&(r=w(t.children[e],n,r)),r instanceof x)break;return r},value:function(t,n,r){return n(r,t.value,t.key)},hashmap:function(t,n,r){for(var e in t.values)if(t.values.hasOwnProperty(e)&&(r=w(t.values[e],n,r)),r instanceof x)break;return r}},x=o.reduce.Break=function(t){return this instanceof x?void(this.value=t):new x(t)};o.mutable=function(t){return o.reduce(t,I,{})};var I=function(t,n,r){return t[r]=n,t};o.keys=function(t){return o.reduce(t,k,[])};var k=function(t,n,r){return t.push(r),t}},function(t){"use strict";var n=function(t,n){for(var r in n)t[r]=n[r];return t},r=function(t){return n({},t)},e=function(t,n,r){return[].slice.call(t,n,r)},u=function(t,n){var r={};for(var e in t)r[e]=n(t[e],e,t);return r},o=function(t,n){for(var r=[],e=0,u=t.length;u>e;e+=1)r.push(n(t[e],e,t));return r},i=function(t,n){var r=t[0];t=t.slice(1);for(var e=0,u=t.length;u>e;e+=1)r=n(r,t[e]);return r},a=function(t){for(var n=e(arguments,1),r={},u=0,o=n.length;o>u;u+=1)r[n[u]]=t[n[u]];return r},s=Object.keys||function(t){var n=[];for(var r in t)n.push(r);return n};t.exports={extend:n,clone:r,slice:e,mapObj:u,pick:a,map:o,reduce:i,keys:s}},function(t,n,r){var e=function(t,n){return t>>>n&31},u=function(t,n,r){return e(r(t),n)};t.exports={hash:r(32),mask:u}},function(t){t.exports=function(t){for(var n=5381,r=t.length;r;)n=33*n^t.charCodeAt(--r);return n>=0?n:(2147483647&n)+2147483648}}]);